<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="http://http-auth.info">http-auth (v3.1.3)</a>
</h1>
<h4>Node.js package for HTTP basic and digest access authentication.</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.http-auth">module http-auth</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.http-auth.basic">
            function <span class="apidocSignatureSpan">http-auth.</span>basic
            <span class="apidocSignatureSpan">(options, checker)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.http-auth.connect">
            function <span class="apidocSignatureSpan">http-auth.</span>connect
            <span class="apidocSignatureSpan">(auth)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.http-auth.digest">
            function <span class="apidocSignatureSpan">http-auth.</span>digest
            <span class="apidocSignatureSpan">(options, checker)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.http-auth.hapi">
            function <span class="apidocSignatureSpan">http-auth.</span>hapi
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.http-auth.koa">
            function <span class="apidocSignatureSpan">http-auth.</span>koa
            <span class="apidocSignatureSpan">(auth)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.http-auth.passport">
            function <span class="apidocSignatureSpan">http-auth.</span>passport
            <span class="apidocSignatureSpan">(auth)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">http-auth.</span>http_auth</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">http-auth.</span>utils</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.http-auth.hapi">module http-auth.hapi</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.http-auth.hapi.register">
            function <span class="apidocSignatureSpan">http-auth.hapi.</span>register
            <span class="apidocSignatureSpan">(plugin, options, next)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.http-auth.http_auth">module http-auth.http_auth</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.http-auth.http_auth.basic">
            function <span class="apidocSignatureSpan">http-auth.http_auth.</span>basic
            <span class="apidocSignatureSpan">(options, checker)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.http-auth.http_auth.connect">
            function <span class="apidocSignatureSpan">http-auth.http_auth.</span>connect
            <span class="apidocSignatureSpan">(auth)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.http-auth.http_auth.digest">
            function <span class="apidocSignatureSpan">http-auth.http_auth.</span>digest
            <span class="apidocSignatureSpan">(options, checker)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.http-auth.http_auth.hapi">
            function <span class="apidocSignatureSpan">http-auth.http_auth.</span>hapi
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.http-auth.http_auth.koa">
            function <span class="apidocSignatureSpan">http-auth.http_auth.</span>koa
            <span class="apidocSignatureSpan">(auth)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.http-auth.http_auth.passport">
            function <span class="apidocSignatureSpan">http-auth.http_auth.</span>passport
            <span class="apidocSignatureSpan">(auth)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.http-auth.utils">module http-auth.utils</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.http-auth.utils.base64">
            function <span class="apidocSignatureSpan">http-auth.utils.</span>base64
            <span class="apidocSignatureSpan">(input)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.http-auth.utils.decodeBase64">
            function <span class="apidocSignatureSpan">http-auth.utils.</span>decodeBase64
            <span class="apidocSignatureSpan">(input)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.http-auth.utils.isAvailable">
            function <span class="apidocSignatureSpan">http-auth.utils.</span>isAvailable
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.http-auth.utils.md5">
            function <span class="apidocSignatureSpan">http-auth.utils.</span>md5
            <span class="apidocSignatureSpan">(input)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.http-auth.utils.sha1">
            function <span class="apidocSignatureSpan">http-auth.utils.</span>sha1
            <span class="apidocSignatureSpan">(input)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.http-auth" id="apidoc.module.http-auth">module http-auth</a></h1>


    <h2>
        <a href="#apidoc.element.http-auth.basic" id="apidoc.element.http-auth.basic">
        function <span class="apidocSignatureSpan">http-auth.</span>basic
        <span class="apidocSignatureSpan">(options, checker)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">(options, checker) =&gt; {
    return require('./auth/basic')(options, checker);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
$ npm install http-auth
```	

## Basic example
```javascript
// Authentication module.
var auth = require('http-auth');
var basic = auth.<span class="apidocCodeKeywordSpan">basic</span>({
	realm: "Simon Area.",
	file: __dirname + "/../data/users.htpasswd"
});

// Creating new HTTP server.
http.createServer(basic, (req, res) =&gt; {
	res.end(`Welcome to private area - ${req.user}!`);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.http-auth.connect" id="apidoc.element.http-auth.connect">
        function <span class="apidocSignatureSpan">http-auth.</span>connect
        <span class="apidocSignatureSpan">(auth)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">(auth) =&gt; {
    return require('./server/connect')(auth);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var basic = auth.basic({
	realm: "Simon Area.",
	file: __dirname + "/../data/users.htpasswd"
});

// Application setup.
var app = express();
app.use(auth.<span class="apidocCodeKeywordSpan">connect</span>(basic));

// Setup route.
app.get('/', (req, res) =&gt; {
    res.send(`Hello from express - ${req.user}!`);
});
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.http-auth.digest" id="apidoc.element.http-auth.digest">
        function <span class="apidocSignatureSpan">http-auth.</span>digest
        <span class="apidocSignatureSpan">(options, checker)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">(options, checker) =&gt; {
    return require('./auth/digest')(options, checker);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
const utils = {};

// Generates md5 hash of input.
utils.md5 = (input) =&gt; {
let hash = crypto.createHash('MD5');
hash.update(input);

return hash.<span class="apidocCodeKeywordSpan">digest</span>('hex');
};

// Generates sha1 hash of input.
utils.sha1 = (input) =&gt; {
let hash = crypto.createHash('sha1');
hash.update(input);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.http-auth.hapi" id="apidoc.element.http-auth.hapi">
        function <span class="apidocSignatureSpan">http-auth.</span>hapi
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">() =&gt; {
    return require('./server/hapi');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

// Create server.
const server = new Hapi.Server();
server.connection({ port: 1337 });

// Register auth plugin.
server.register(auth.<span class="apidocCodeKeywordSpan">hapi</span>());

// Setup strategy.
server.auth.strategy('http-auth', 'http', basic);

// Setup route.
server.route({
method: 'GET',
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.http-auth.koa" id="apidoc.element.http-auth.koa">
        function <span class="apidocSignatureSpan">http-auth.</span>koa
        <span class="apidocSignatureSpan">(auth)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">(auth) =&gt; {
    return require('./server/koa')(auth);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Final handler.
app.use(function *(next) {
    yield next;
    this.body = `Hello from koa - ${this.req.user}!`;
});

// Enable auth.
app.use(auth.<span class="apidocCodeKeywordSpan">koa</span>(basic));
```

## For [koa@next](https://github.com/koajs/koa/tree/v2.x) you can use [http-auth-koa](https://github.com/http-auth/http-auth-koa
)
```javascript
// Authentication module.
import auth from 'http-auth'
import koaAuth from 'http-auth-koa'
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.http-auth.passport" id="apidoc.element.http-auth.passport">
        function <span class="apidocSignatureSpan">http-auth.</span>passport
        <span class="apidocSignatureSpan">(auth)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">(auth) =&gt; {
    return require('./server/passport')(auth);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

// Application setup.
var app = express();

// Setup strategy.
var passport = require('passport');
passport.use(auth.<span class="apidocCodeKeywordSpan">passport</span>(basic));

// Setup route.
app.get('/', passport.authenticate('http', {session: false}),
    (req, res) =&gt; {
        res.end(`Welcome to private area - ${req.user}!`);
    }
);
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.http-auth.hapi" id="apidoc.module.http-auth.hapi">module http-auth.hapi</a></h1>


    <h2>
        <a href="#apidoc.element.http-auth.hapi.register" id="apidoc.element.http-auth.hapi.register">
        function <span class="apidocSignatureSpan">http-auth.hapi.</span>register
        <span class="apidocSignatureSpan">(plugin, options, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">(plugin, options, next) =&gt; {
    plugin.auth.scheme('http', httpScheme);
    next();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

// Create server.
const server = new Hapi.Server();
server.connection({ port: 1337 });

// Register auth plugin.
server.<span class="apidocCodeKeywordSpan">register</span>(auth.hapi());

// Setup strategy.
server.auth.strategy('http-auth', 'http', basic);

// Setup route.
server.route({
method: 'GET',
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.http-auth.http_auth" id="apidoc.module.http-auth.http_auth">module http-auth.http_auth</a></h1>


    <h2>
        <a href="#apidoc.element.http-auth.http_auth.basic" id="apidoc.element.http-auth.http_auth.basic">
        function <span class="apidocSignatureSpan">http-auth.http_auth.</span>basic
        <span class="apidocSignatureSpan">(options, checker)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">(options, checker) =&gt; {
    return require('./auth/basic')(options, checker);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
$ npm install http-auth
```	

## Basic example
```javascript
// Authentication module.
var auth = require('http-auth');
var basic = auth.<span class="apidocCodeKeywordSpan">basic</span>({
	realm: "Simon Area.",
	file: __dirname + "/../data/users.htpasswd"
});

// Creating new HTTP server.
http.createServer(basic, (req, res) =&gt; {
	res.end(`Welcome to private area - ${req.user}!`);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.http-auth.http_auth.connect" id="apidoc.element.http-auth.http_auth.connect">
        function <span class="apidocSignatureSpan">http-auth.http_auth.</span>connect
        <span class="apidocSignatureSpan">(auth)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">(auth) =&gt; {
    return require('./server/connect')(auth);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var basic = auth.basic({
	realm: "Simon Area.",
	file: __dirname + "/../data/users.htpasswd"
});

// Application setup.
var app = express();
app.use(auth.<span class="apidocCodeKeywordSpan">connect</span>(basic));

// Setup route.
app.get('/', (req, res) =&gt; {
    res.send(`Hello from express - ${req.user}!`);
});
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.http-auth.http_auth.digest" id="apidoc.element.http-auth.http_auth.digest">
        function <span class="apidocSignatureSpan">http-auth.http_auth.</span>digest
        <span class="apidocSignatureSpan">(options, checker)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">(options, checker) =&gt; {
    return require('./auth/digest')(options, checker);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
const utils = {};

// Generates md5 hash of input.
utils.md5 = (input) =&gt; {
let hash = crypto.createHash('MD5');
hash.update(input);

return hash.<span class="apidocCodeKeywordSpan">digest</span>('hex');
};

// Generates sha1 hash of input.
utils.sha1 = (input) =&gt; {
let hash = crypto.createHash('sha1');
hash.update(input);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.http-auth.http_auth.hapi" id="apidoc.element.http-auth.http_auth.hapi">
        function <span class="apidocSignatureSpan">http-auth.http_auth.</span>hapi
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">() =&gt; {
    return require('./server/hapi');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

// Create server.
const server = new Hapi.Server();
server.connection({ port: 1337 });

// Register auth plugin.
server.register(auth.<span class="apidocCodeKeywordSpan">hapi</span>());

// Setup strategy.
server.auth.strategy('http-auth', 'http', basic);

// Setup route.
server.route({
method: 'GET',
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.http-auth.http_auth.koa" id="apidoc.element.http-auth.http_auth.koa">
        function <span class="apidocSignatureSpan">http-auth.http_auth.</span>koa
        <span class="apidocSignatureSpan">(auth)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">(auth) =&gt; {
    return require('./server/koa')(auth);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Final handler.
app.use(function *(next) {
    yield next;
    this.body = `Hello from koa - ${this.req.user}!`;
});

// Enable auth.
app.use(auth.<span class="apidocCodeKeywordSpan">koa</span>(basic));
```

## For [koa@next](https://github.com/koajs/koa/tree/v2.x) you can use [http-auth-koa](https://github.com/http-auth/http-auth-koa
)
```javascript
// Authentication module.
import auth from 'http-auth'
import koaAuth from 'http-auth-koa'
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.http-auth.http_auth.passport" id="apidoc.element.http-auth.http_auth.passport">
        function <span class="apidocSignatureSpan">http-auth.http_auth.</span>passport
        <span class="apidocSignatureSpan">(auth)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">(auth) =&gt; {
    return require('./server/passport')(auth);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

// Application setup.
var app = express();

// Setup strategy.
var passport = require('passport');
passport.use(auth.<span class="apidocCodeKeywordSpan">passport</span>(basic));

// Setup route.
app.get('/', passport.authenticate('http', {session: false}),
    (req, res) =&gt; {
        res.end(`Welcome to private area - ${req.user}!`);
    }
);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.http-auth.utils" id="apidoc.module.http-auth.utils">module http-auth.utils</a></h1>


    <h2>
        <a href="#apidoc.element.http-auth.utils.base64" id="apidoc.element.http-auth.utils.base64">
        function <span class="apidocSignatureSpan">http-auth.utils.</span>base64
        <span class="apidocSignatureSpan">(input)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">(input) =&gt; {
    return new Buffer(input, 'utf8').toString('base64');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.http-auth.utils.decodeBase64" id="apidoc.element.http-auth.utils.decodeBase64">
        function <span class="apidocSignatureSpan">http-auth.utils.</span>decodeBase64
        <span class="apidocSignatureSpan">(input)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">(input) =&gt; {
    return new Buffer(input, 'base64').toString('utf8');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    return tokens[1];
}
    }

    // Searching for user.
    findUser(req, hash, callback) {
// Decode base64.
let splitHash = utils.<span class="apidocCodeKeywordSpan">decodeBase64</span>(hash).split(":");
let username = splitHash.shift();
let password = splitHash.join(":");

let self = this;

if (this.checker) {
    // Custom auth.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.http-auth.utils.isAvailable" id="apidoc.element.http-auth.utils.isAvailable">
        function <span class="apidocSignatureSpan">http-auth.utils.</span>isAvailable
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">(path) =&gt; {
    try {
        return !!require.resolve(path);
    } catch (err) {
        return false;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// http integration.
require('./server/http');

// https integration.
require('./server/https');

// http-proxy integration.
if (utils.<span class="apidocCodeKeywordSpan">isAvailable</span>('http-proxy')) {
require('./server/proxy');
}

// Exports.
module.exports = {
// Basic authentication.
basic: (options, checker) =&gt; {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.http-auth.utils.md5" id="apidoc.element.http-auth.utils.md5">
        function <span class="apidocSignatureSpan">http-auth.utils.</span>md5
        <span class="apidocSignatureSpan">(input)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">(input) =&gt; {
    let hash = crypto.createHash('MD5');
    hash.update(input);

    return hash.digest('hex');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

    // Validating hash.
    validate(ha2, co, hash) {
let ha1 = hash;

// Algorithm.
if (co.algorithm === 'MD5-sess') {
    ha1 = utils.<span class="apidocCodeKeywordSpan">md5</span>(`${ha1}:${co.nonce}:${co.cnonce}`);
}

let response = undefined;

// Quality of protection.
if (co.qop) {
    response = utils.md5(`${ha1}:${co.nonce}:${co.nc}:${co.cnonce}:${co.qop}:${ha2}`);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.http-auth.utils.sha1" id="apidoc.element.http-auth.utils.sha1">
        function <span class="apidocSignatureSpan">http-auth.utils.</span>sha1
        <span class="apidocSignatureSpan">(input)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">(input) =&gt; {
    let hash = crypto.createHash('sha1');
    hash.update(input);

    return hash.digest('base64');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    super(options, checker);
}

// Verifies if password is correct.
validate (hash, password) {
    if (hash.substr(0, 5) === '{SHA}') {
        hash = hash.substr(5);
        return hash === utils.<span class="apidocCodeKeywordSpan">sha1</span>(password);
    } else if (hash.substr(0, 6) === '$apr1$' || hash.substr(0, 3) === '$1$') {
        return hash === md5(password, hash);
    } else if (hash.substr(0, 4) === '$2y$' || hash.substr(0, 4) === '$2a$') {
        return bcrypt.compareSync(password, hash);
    } else if (hash === crypt(password, hash)) {
        return true;
    } else if (hash.length === password.length) {
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>